@page "/search"

<h1 style="text-align: center">Search</h1>
<div class="searchForm">
        <input class="searchInput" placeholder="Enter your value" id="value" @bind-value="@value" />
    @foreach (var item in new string[] { "Name", "Number", "Email" })
    {
        <div class="radioGroup">
            <input type="radio" value="@item" @onchange="RadioSelection" checked=@(RadioValue.Equals(item,StringComparison.OrdinalIgnoreCase)) />
            <label for="@item">@item</label>
        </div>
    }
<div class="btnMother">
    <button class="btnSubmit" type="submit" @onclick="Click">Submit</button>
</div>
</div>


@if (!@check) {
    <h2 style="text-align: center">Contact not found</h2>
}
<div class="container" style="margin-top:25px;">
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                @if (users.Any())
                {
                    <th>Name</th>
                    <th>Number</th>
                    <th>Email</th>
                }
            </tr>
        </thead>
        <tbody>
            @foreach (var user in users)
            {
            <tr>
                <td>@user.Name</td>
                <td>@user.Number</td>
                <td>@user.Email</td>
            </tr>
            }
        </tbody>
    </table>
</div>

@code{
    UserDAO dAO = new UserDAO();
    List<User> users = new List<User>();
    string RadioValue = "";
    string value = "";
    bool check = true;

    void RadioSelection(ChangeEventArgs args)
    {
        RadioValue = args.Value.ToString();
    }

    void Click()
    {
        users.Clear();
        users = dAO.findUser(RadioValue, value);
        check = true;
        if (!users.Any())
            check = false;
    }
}
